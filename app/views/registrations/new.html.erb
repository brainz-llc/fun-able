<div class="max-w-md mx-auto mt-12">
  <div class="bg-bg-card rounded-xl p-8">
    <h1 class="text-2xl font-bold mb-6 text-center">
      <% if current_user&.guest? %>
        <%= t('user.upgrade_account') %>
      <% else %>
        <%= t('nav.register') %>
      <% end %>
    </h1>

    <%= form_with model: @user, url: registration_path, method: :post, class: "space-y-4" do |f| %>
      <div>
        <%= f.label :display_name, t('user.display_name'), class: "label" %>
        <%= f.text_field :display_name,
            class: "input",
            required: true,
            autofocus: !current_user&.guest?,
            value: @user.display_name,
            minlength: 2,
            maxlength: 30 %>
      </div>

      <div>
        <%= f.label :email, t('user.email'), class: "label" %>
        <%= f.email_field :email,
            class: "input",
            required: true,
            autofocus: current_user&.guest?,
            autocomplete: "email" %>
      </div>

      <div>
        <%= f.label :password, t('user.password'), class: "label" %>
        <%= f.password_field :password,
            class: "input",
            required: true,
            minlength: 6,
            autocomplete: "new-password" %>
        <p class="text-xs text-text-muted mt-1">Minimo 6 caracteres</p>
      </div>

      <div>
        <%= f.label :password_confirmation, t('user.password_confirmation'), class: "label" %>
        <%= f.password_field :password_confirmation,
            class: "input",
            required: true,
            autocomplete: "new-password" %>
      </div>

      <%= f.submit current_user&.guest? ? t('user.upgrade_account') : t('nav.register'), class: "btn btn-primary w-full" %>
    <% end %>

    <% unless current_user&.guest? %>
      <div class="mt-6 text-center">
        <p class="text-text-secondary text-sm mb-4">Ya tienes cuenta?</p>
        <%= link_to t('nav.login'), new_session_path, class: "text-terracotta hover:underline" %>
      </div>
    <% end %>
  </div>
</div>

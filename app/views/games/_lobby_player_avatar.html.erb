<div class="lobby-player-avatar group aspect-square rounded-lg flex flex-col items-center justify-center p-1.5 relative transition-all duration-300 hover:scale-[1.03]"
     id="player_<%= player.id %>"
     style="background: linear-gradient(145deg, rgba(15, 15, 20, 0.9) 0%, rgba(20, 20, 25, 0.9) 100%);
            border: 1px solid <%= player.host? ? 'rgba(236, 72, 153, 0.4)' : 'rgba(6, 182, 212, 0.2)' %>;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2)<%= player.host? ? ', 0 0 15px rgba(236, 72, 153, 0.1)' : '' %>;">

  <!-- Host Crown Badge -->
  <% if player.host? %>
    <div class="absolute -top-1.5 -right-1.5 w-5 h-5 rounded-full flex items-center justify-center text-[10px]"
         style="background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
                box-shadow: 0 0 10px rgba(236, 72, 153, 0.5);">
      <span>&#x1F451;</span>
    </div>
  <% end %>

  <!-- Connection Status Indicator -->
  <% unless player.connected? %>
    <div class="absolute -top-1 -left-1 w-3 h-3 rounded-full flex items-center justify-center"
         style="background: rgba(239, 68, 68, 0.9);
                box-shadow: 0 0 6px rgba(239, 68, 68, 0.5);">
      <span class="text-[6px]">!</span>
    </div>
  <% end %>

  <!-- Avatar Circle -->
  <div class="w-8 h-8 sm:w-9 sm:h-9 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm mb-1 transition-all duration-300"
       style="background: linear-gradient(135deg, <%= player.host? ? '#ec4899, #db2777' : '#06b6d4, #0891b2' %>);
              box-shadow: 0 2px 10px <%= player.host? ? 'rgba(236, 72, 153, 0.3)' : 'rgba(6, 182, 212, 0.25)' %>;">
    <%= player.avatar_initials %>
  </div>

  <!-- Player Name -->
  <span class="text-[10px] sm:text-xs text-center truncate w-full px-0.5 <%= player.connected? ? 'text-white/80' : 'text-white/30' %>">
    <%= truncate(player.display_name, length: 8) %>
  </span>

  <!-- Score (if any) -->
  <% if player.score > 0 %>
    <span class="text-[10px] text-cyan-400"><%= player.score %> pts</span>
  <% end %>

  <!-- Kick Button (Host only) -->
  <% if local_assigns[:show_kick] && show_kick %>
    <%= button_to kick_game_game_actions_path(player.game, player_id: player.id),
        method: :post,
        class: "absolute -bottom-1 left-1/2 -translate-x-1/2 w-5 h-5 rounded flex items-center justify-center transition-all duration-300 opacity-0 group-hover:opacity-100 text-white/40 hover:text-red-400",
        style: "background: rgba(20, 20, 25, 0.95); border: 1px solid rgba(255, 255, 255, 0.1);",
        data: { turbo_confirm: "Expulsar a #{player.display_name}?" } do %>
      <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    <% end %>
  <% end %>
</div>
